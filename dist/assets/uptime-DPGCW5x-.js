import"./modulepreload-polyfill-B5Qt9EMX.js";import"./nav-BgMtwFJp.js";function B(e,n){const s=n.querySelector(".status-indicator"),o=n.querySelector(".status span:last-child"),t=n.querySelector(".response-time");s.className="status-indicator loading",o.textContent="Checking...";const c=performance.now(),a=2e3,d=15e3,m=new AbortController,f=setTimeout(()=>{s.className="status-indicator busy",o.textContent="Busy",t.textContent="Slow response..."},a),p=setTimeout(()=>{m.abort(),s.className="status-indicator unavailable",o.textContent="Unavailable",t.textContent="Timeout"},d);fetch(e,{method:"HEAD",signal:m.signal}).then(i=>{clearTimeout(f),clearTimeout(p);const r=(performance.now()-c).toFixed(0);parseInt(r)>a?(s.className="status-indicator busy",o.textContent="Busy"):(s.className="status-indicator online",o.textContent="Online"),t.textContent=`Response time: ${r}ms`}).catch(i=>{clearTimeout(f),clearTimeout(p),i.name!=="AbortError"&&(s.className="status-indicator unavailable",o.textContent="Unavailable",t.textContent="Timeout")})}let u=[];function w(){localStorage.setItem("aoTrackerCustomNodes",JSON.stringify(u))}function H(e,n,s){const o=e.value.trim();if(!o)return;let t;if(o.startsWith("http")?t=o:t=`https://${o}`,!u.includes(t)){u.push(t),w();const c=document.createElement("div"),a=`custom-${t.replace(/https?:\/\//,"").replace(/\./g,"-").replace(/\//g,"")}`,d=t.replace(/^https?:\/\//,"");c.id=a,c.className="node-card",c.innerHTML=`
            <div class="node-name">${d}</div>
            <div class="status">
                <span class="status-indicator loading"></span>
                <span>Checking...</span>
            </div>
            <div class="response-time">-</div>
        `,n.firstChild?n.insertBefore(c,n.firstChild):n.appendChild(c),B(t,c),e.value=""}}function O(e){const n=e.value.trim();if(!n)return;let s;n.startsWith("http")?s=n:s=`https://${n}`;const o=u.indexOf(s);if(o!==-1){u.splice(o,1),w();const t=`custom-${s.replace(/https?:\/\//,"").replace(/\./g,"-").replace(/\//g,"")}`,c=document.getElementById(t);c?(c.parentNode.removeChild(c),e.value="",console.log(`Node "${n}" has been removed.`)):console.error(`Element for node "${n}" not found in the DOM.`),e.value="",console.log(`Node "${n}" has been removed from your list.`)}else alert(`Node "${n}" was not found in your custom nodes list.`)}function E(){const e=localStorage.getItem("aoTrackerCustomNodes");return e&&(u=JSON.parse(e)),u}const k=["cu500","cu501","cu502","cu503","cu504","cu505","cu506","cu507","cu508","cu509","cu510","cu626","cu927","cu1000","cu1001","cu1002","cu1003","cu1984","cu2733","cu2746","cu2800","cu2801","cu2802","cu2803","cu2804","cu2805","cu2807","cu2808","cu2809","cu2810","cu2811","cu2812","cu2813","cu2814","cu2815","cu2850","cu2901","cu2902","cu2903","cu2904","cu2905","cu3000","cu3001","cu3002","cu3003","cu3004","cu3005","cu3006","cu3008","cu3009","cu3474","cu4000","cu4001","cu4499","cu4743","cu5001","cu5767","cu6000","cu6001","cu6002","cu6003","cu6004","cu6005","cu6006","cu6007","cu6008","cu6009","cu6010","cu6200","cu6201","cu6363","cu6464","cu6465","cu6466","cu7382","cu7827","cu9000","cu9001","cu9002","cu9003","cu9272","cu9273","cu12000","cu12001","cu12002","cu12003","cu13000","cu13001","cu28861","cu27462","cu27463","cu27464","cu28862","cu44992","cu63632","cu63633","cu84668","cu89537"],N={testnet:{nodeSuffix:".ao-testnet.xyz/"},checkTimeout:15e3,busyTimeout:2e3,autoRefreshInterval:12e5};let y,M="testnet";function q(){S(),D()}function D(){y&&clearInterval(y),y=setInterval(()=>S(),N.autoRefreshInterval)}function K(){const e=document.getElementById("superLastUpdated");if(e){const n=new Date;e.textContent=`Last updated: ${n.toLocaleTimeString()}`}}let L=0,$=0;function S(){const e=document.getElementById("superStatusContainer");e&&(e.innerHTML="",K(),L=k.length,$=0,k.forEach(n=>{const s=`https://${n}${N[M].nodeSuffix}`;z(s,e)}))}function z(e,n){const s=`super-${e.replace(/https?:\/\//,"").replace(/\./g,"-").replace(/\//g,"")}`,o=e.match(/\/\/([^.]+)/)[1]||e,t=document.createElement("div");t.id=s,t.className="node-card",n.appendChild(t),t.innerHTML=`
        <div class="node-name">${o}</div>
        <div class="status">
            <span class="status-indicator loading"></span>
            <span>Checking...</span>
        </div>
        <div class="response-time">-</div>
    `;const c=performance.now(),a=N.busyTimeout,d=N.checkTimeout,m=new AbortController,f=setTimeout(()=>{T(t,"busy")},a),p=setTimeout(()=>{m.abort(),T(t,"unavailable")},d);fetch(e,{method:"HEAD",signal:m.signal}).then(i=>{clearTimeout(f),clearTimeout(p);const r=(performance.now()-c).toFixed(0);let l="online";parseInt(r)>a&&(l="busy"),(l==="online"||l==="busy")&&$++,T(t,l,r)}).catch(i=>{clearTimeout(f),clearTimeout(p),i.name!=="AbortError"&&T(t,"unavailable")})}function T(e,n,s=null){const o=e.querySelector(".status-indicator"),t=e.querySelector(".status span:last-child"),c=e.querySelector(".response-time");switch(n){case"online":o.className="status-indicator online",t.textContent="Online",c.textContent=`Response time: ${s}ms`;break;case"busy":o.className="status-indicator busy",t.textContent="Busy",c.textContent=s?`Response time: ${s}ms`:"Slow response...";break;case"unavailable":o.className="status-indicator unavailable",t.textContent="Unavailable",c.textContent="Timeout";break}}function F(){return L}function P(){return $}const C={testnet:{baseUrl:"https://cu.ao-testnet.xyz/",nodePrefix:"https://cu",nodeSuffix:".ao-testnet.xyz/",initialNodes:75},autoRefreshInterval:12e5};document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("additionalNode"),n=document.getElementById("addNodeBtn"),s=document.getElementById("removeNodeBtn"),o=document.getElementById("customStatusContainer");E(),n&&n.addEventListener("click",function(){H(e,o)}),s&&s.addEventListener("click",function(){O(e)}),_(),V()});function _(){const e=window.location.pathname;document.querySelectorAll(".nav-item").forEach(s=>{const o=s.getAttribute("href");(e.includes(o)&&o!=="/"&&o!=="/index.html"||o==="/index.html"&&(e==="/"||e==="/index.html"))&&s.classList.add("active")})}let x="testnet",b;const g=document.getElementById("statusContainer"),J=document.getElementById("refreshBtn"),W=document.getElementById("lastUpdated"),U=document.getElementById("summaryText");document.getElementById("addNodeBtn");document.getElementById("additionalNode");function V(){E(),J.addEventListener("click",()=>{I(),document.getElementById("hundredThouNodesContent")&&S()}),I(),document.getElementById("hundredThouNodesContent")&&q(),j()}function j(){b&&clearInterval(b),b=setInterval(()=>I(),C.autoRefreshInterval)}function I(){g.innerHTML="",Y();const e=C[x];u.length;let n=0,s=0;e.initialNodes+u.length;for(let c=1;c<=e.initialNodes;c++){const a=`${e.nodePrefix}${c}${e.nodeSuffix}`;Q(a,d=>{n++,d&&s++,X(s,n)})}const t=document.getElementById("customStatusContainer");t&&G(t)}function G(e,n){const s=E();return s&&s.length>0&&e&&(e.innerHTML="",s.forEach(o=>{if(!o)return;const t=`custom-${o.replace(/^https?:\/\//,"").replace(/\./g,"-").replace(/\//g,"")}`;let c=o.replace(/^https?:\/\//,""),a=document.createElement("div");a.id=t,a.className="node-card",a.innerHTML=`
                <div class="node-name">${c}</div>
                <div class="status">
                    <span class="status-indicator loading"></span>
                    <span>Checking...</span>
                </div>
                <div class="response-time">-</div>
            `,e.appendChild(a),B(o,a)})),s}function Q(e,n){const s=e.replace(/https?:\/\//,"").replace(/\./g,"-").replace(/\//g,""),o=e.match(/\/\/([^.]+)/)[1]||e;let t=document.getElementById(s);if(!t)if(t=document.createElement("div"),t.id=s,t.className="node-card",u.includes(e)){const h=Array.from(g.children).find(r=>{const l="https://"+r.id.replace(/-/g,".")+"/";return!u.includes(l)});h?g.insertBefore(t,h):g.appendChild(t)}else g.appendChild(t);t.innerHTML=`
        <div class="node-name">${o}</div>
        <div class="status">
            <span class="status-indicator loading"></span>
            <span>Checking...</span>
        </div>
        <div class="response-time">-</div>
    `;const c=performance.now(),a=2e3,d=15e3,m=new AbortController,f=setTimeout(()=>{v(t,"busy")},a),p=setTimeout(()=>{m.abort(),v(t,"unavailable"),n&&n(!1)},d);fetch(e,{method:"HEAD",signal:m.signal}).then(i=>{clearTimeout(f),clearTimeout(p);const r=(performance.now()-c).toFixed(0);v(t,"online",r),n&&n(!0)}).catch(i=>{if(clearTimeout(f),clearTimeout(p),i.name==="AbortError")return;const h=i.message&&(i.message.includes("ERR_NAME_NOT_RESOLVED")||i.message.includes("Failed to fetch")),l=e.includes(C[x].nodePrefix)?parseInt(e.match(/cu(\d+)/)[1]):0,A=l>0&&l<=C[x].initialNodes,R=u.includes(e);h&&!A&&!R?t.remove():v(t,"unavailable"),n&&n(!1)})}function v(e,n,s=null){const o=e.querySelector(".status-indicator"),t=e.querySelector(".status span:last-child"),c=e.querySelector(".response-time");switch(s!==null&&parseInt(s)>2e3&&(n="busy"),n){case"online":o.className="status-indicator online",t.textContent="Online",c.textContent=`Response time: ${s}ms`;break;case"busy":o.className="status-indicator busy",t.textContent="Busy",c.textContent=s?`Response time: ${s}ms`:"Slow response...";break;case"unavailable":o.className="status-indicator unavailable",t.textContent="Unavailable",c.textContent="Timeout";break}}function X(e,n,s){const o=F()||0,t=P()||0,c=n+o,a=e+t,d=(a/c*100).toFixed(1);U.innerHTML=`
        <strong>${a}</strong> of <strong>${c}</strong> nodes available (${d}%)
        <br>
        <progress value="${a}" max="${c}" style="width: 50%; margin-top: 10px;"></progress>
    `}function Y(){const e=new Date;W.textContent=`Last updated: ${e.toLocaleTimeString()}`}
